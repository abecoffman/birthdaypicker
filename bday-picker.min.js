/*
 * jQuery Birthday Picker: v1.4 - 10/16/2011
 * http://abecoffman.com/stuff/birthdaypicker
 *
 * Copyright (c) 2010 Abe Coffman
 * Dual licensed under the MIT and GPL licenses.
 *
 */
!function(a){var b={"short":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"long":["January","February","March","April","May","June","July","August","September","October","November","December"]},c=new Date,d=c.getFullYear();c.getMonth()+1,c.getDate(),a.fn.birthdaypicker=function(c){var e={maxAge:120,minAge:0,futureDates:!1,maxYear:d,dateFormat:"middleEndian",monthFormat:"short",placeholder:!0,legend:"",defaultDate:!1,fieldName:"birthdte",fieldId:"birthdte",hiddenDate:!0,onChange:null,tabindex:null,triggerEvent:"change"};return this.each(function(){function w(){e.hiddenDate&&(a("#"+e.fieldId).length||a("<input type='hidden' name='"+e.fieldName+"'/>").attr("id",e.fieldId).val(l).appendTo(g))}c&&a.extend(e,c);var f=a("<fieldset class='birthday-picker'></fieldset>"),g=a(this),h=a("<select class='"+e.fieldName+"-year' name='"+e.fieldName+"[year]'></select>"),i=a("<select class='"+e.fieldName+"-month' name='"+e.fieldName+"[month]'></select>"),j=a("<select class='"+e.fieldName+"-day' name='"+e.fieldName+"[day]'></select>");e.legend&&a("<legend>"+e.legend+"</legend>").appendTo(f);var k=e.tabindex;"bigEndian"==e.dateFormat?(f.append(h).append(i).append(j),null!=k&&(h.attr("tabindex",k),i.attr("tabindex",k++),j.attr("tabindex",k++))):"littleEndian"==e.dateFormat?(f.append(j).append(i).append(h),null!=k&&(j.attr("tabindex",k),i.attr("tabindex",k++),h.attr("tabindex",k++))):(f.append(i).append(j).append(h),null!=k&&(i.attr("tabindex",k),j.attr("tabindex",k++),h.attr("tabindex",k++))),e.placeholder&&(a("<option value='0'>Year:</option>").appendTo(h),a("<option value='0'>Month:</option>").appendTo(i),a("<option value='0'>Day:</option>").appendTo(j));var l;if(e.defaultDate){var m=new Date(e.defaultDate+"T00:00:00"),n=m.getFullYear(),o=m.getMonth()+1,p=m.getDate();10>o&&(o="0"+o),10>p&&(p="0"+p),l=n+"-"+o+"-"+p}var q=d-e.minAge,r=d-e.maxAge;e.futureDates&&e.maxYear!=d&&(q=e.maxYear>1e3?e.maxYear:d+e.maxYear);for(var s=q;s>=r;s--)a("<option></option>").attr("value",s).text(s).appendTo(h);for(var t=0;12>t;t++)a("<option></option>").attr("value",t+1).text(b[e.monthFormat][t]).appendTo(i);for(var u=1;32>u;u++)a("<option></option>").attr("value",u).text(u).appendTo(j);if(a(this).append(f),w(),e.defaultDate){var v=new Date(e.defaultDate+"T00:00:00");h.val(v.getFullYear()),i.val(v.getMonth()+1),j.val(v.getDate())}f.change(function(){var c=new Date,f=(c.getFullYear(),c.getMonth()+1),g=c.getDate(),k=parseInt(h.val(),10),m=parseInt(i.val(),10),n=parseInt(j.val(),10),o=new Date(k,m,0).getDate(),p=parseInt(i.children(":last").val()),r=parseInt(j.children(":last").val());if(r>o)for(;r>o;)j.children(":last").remove(),r--;else if(o>r)for(;o>r;)r++,j.append("<option value="+r+">"+r+"</option>");if(!e.futureDates&&k==q){if(p>f){for(;p>f;)i.children(":last").remove(),p--;j.children(":first").attr("selected","selected")}if(m===f)for(;r>g;)j.children(":last").remove(),r-=1}if(k!=q&&12!=p)for(;12>p;)i.append("<option value="+(p+1)+">"+b[e.monthFormat][p]+"</option>"),p++;return 0!=k*m*n&&(10>m&&(m="0"+m),10>n&&(n="0"+n),l=k+"-"+m+"-"+n,a(this).parent().find("#"+e.fieldId).val(l).trigger(e.triggerEvent),null!=e.onChange&&e.onChange(l)),!1})})}}(jQuery);
